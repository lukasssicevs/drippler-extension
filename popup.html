<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drippler</title>
    <link rel="stylesheet" href="phosphor-regular.css" />
    <link rel="stylesheet" href="phosphor-bold.css" />
    <link rel="stylesheet" href="phosphor-fill.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header" id="dashboardHeader" style="display: none">
        <div class="logo">
          <img src="assets/header.svg" alt="Drippler" class="header-logo" />
        </div>
        <div class="header-user" id="headerUser">
          <div class="header-avatar" id="headerAvatar">
            <img id="headerProfileImage" style="display: none" />
            <span id="headerUserInitials">U</span>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Authentication Forms -->
        <div class="auth-section" id="authForms" style="display: none">
          <!-- Auth Tabs -->
          <div class="auth-tabs">
            <button class="auth-tab active" id="loginTab">Sign In</button>
            <button class="auth-tab" id="signupTab">Sign Up</button>
          </div>

          <!-- Welcome SVG -->
          <div class="welcome-container">
            <img
              src="assets/welcome.svg"
              alt="Welcome to Drippler"
              class="welcome-svg"
            />
          </div>

          <div class="auth-container">
            <!-- Login Form -->
            <form class="auth-form" id="loginForm">
              <div class="form-group">
                <input
                  type="email"
                  id="loginEmail"
                  placeholder="Email address"
                  required
                />
              </div>
              <div class="form-group">
                <input
                  type="password"
                  id="loginPassword"
                  placeholder="Password"
                  required
                />
              </div>
              <button type="submit" class="btn primary full-width">
                Sign In
              </button>
              <button type="button" class="btn link" id="forgotPasswordBtn">
                Forgot password?
              </button>
            </form>

            <!-- Signup Form -->
            <form class="auth-form" id="signupForm" style="display: none">
              <div class="form-group">
                <input
                  type="email"
                  id="signupEmail"
                  placeholder="Email address"
                  required
                />
              </div>
              <div class="form-group">
                <input
                  type="password"
                  id="signupPassword"
                  placeholder="Password"
                  required
                />
              </div>
              <div class="form-group">
                <input
                  type="password"
                  id="confirmPassword"
                  placeholder="Confirm password"
                  required
                />
              </div>
              <button type="submit" class="btn primary full-width">
                Create Account
              </button>
            </form>

            <!-- Password Reset Form -->
            <form class="auth-form" id="resetForm" style="display: none">
              <div class="form-group">
                <input
                  type="email"
                  id="resetEmail"
                  placeholder="Email address"
                  required
                />
              </div>
              <button type="submit" class="btn primary full-width">
                Send Reset Link
              </button>
              <button type="button" class="btn link" id="backToLoginBtn">
                Back to sign in
              </button>
            </form>

            <!-- Update Password Form -->
            <form
              class="auth-form"
              id="updatePasswordForm"
              style="display: none"
            >
              <div class="form-group">
                <input
                  type="password"
                  id="newPassword"
                  placeholder="New password"
                  required
                />
              </div>
              <div class="form-group">
                <input
                  type="password"
                  id="confirmNewPassword"
                  placeholder="Confirm new password"
                  required
                />
              </div>
              <button type="submit" class="btn primary full-width">
                Update Password
              </button>
            </form>
          </div>
        </div>

        <!-- User Dashboard -->
        <div class="dashboard" id="userDashboard" style="display: none">
          <!-- Tab Navigation -->
          <div class="tab-navigation">
            <button class="tab-btn active" data-tab="avatars">
              <i
                class="ph ph-user"
                style="font-size: 16px; margin-right: 6px"
              ></i>
              Avatars
            </button>
            <button class="tab-btn" data-tab="wardrobe">
              <i
                class="ph ph-cowboy-hat"
                style="font-size: 16px; margin-right: 6px"
              ></i>
              Wardrobe
            </button>
            <button class="tab-btn" data-tab="tryons">
              <i
                class="ph ph-sparkle"
                style="font-size: 16px; margin-right: 6px"
              ></i>
              Try-Ons
            </button>
          </div>

          <!-- Tab Content Container -->
          <div class="tab-container">
            <!-- Avatars Tab -->
            <div class="tab-content active" id="avatarsTab">
              <div class="section-header">
                <button class="btn primary small" id="addAvatarBtn">
                  <i class="ph ph-plus" style="font-size: 16px"></i>
                  Add Avatar
                </button>
              </div>

              <!-- Scrollable Content Area -->
              <div class="content-area">
                <!-- Avatar Selection Grid -->
                <div class="avatar-selection-section">
                  <div class="avatars-grid" id="avatarsGrid">
                    <div class="empty-state">
                      <div class="empty-icon">
                        <i
                          class="ph ph-user-circle"
                          style="font-size: 48px"
                        ></i>
                      </div>
                      <h3>Add Your First Avatar</h3>
                      <p>
                        Upload photos of yourself to use for virtual try-ons.
                        Your active avatar will be used to generate realistic
                        clothing previews.
                      </p>
                      <div class="empty-action">
                        <button
                          class="btn primary"
                          onclick="document.getElementById('avatarFileInput').click()"
                        >
                          <i class="ph ph-plus" style="font-size: 16px"></i>
                          Upload Photo
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Hidden file input for avatar upload -->
              <input
                type="file"
                id="avatarFileInput"
                accept="image/*"
                style="display: none"
              />
            </div>

            <!-- Wardrobe Tab -->
            <div class="tab-content" id="wardrobeTab">
              <div class="section-header">
                <button class="btn primary small" id="addClothingBtn">
                  <i class="ph ph-plus" style="font-size: 16px"></i>
                  Add Item
                </button>
              </div>
              <div class="content-area">
                <div class="clothing-grid" id="clothingGrid">
                  <div class="empty-state">
                    <div class="empty-icon">
                      <i class="ph ph-t-shirt" style="font-size: 48px"></i>
                    </div>
                    <h3>Build Your Wardrobe</h3>
                    <p>
                      Add clothing items to your collection. Save items from the
                      web or upload photos of your own clothes to try them on
                      virtually.
                    </p>
                    <div class="empty-action">
                      <button
                        class="btn primary"
                        onclick="document.getElementById('clothingImageInput').click()"
                      >
                        <i class="ph ph-plus" style="font-size: 16px"></i>
                        Add First Item
                      </button>
                    </div>
                    <div class="empty-tip">
                      <p>
                        <strong>Tip:</strong> Right-click on clothing images
                        while browsing the web to add them instantly!
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Hidden file input -->
              <input
                type="file"
                id="clothingImageInput"
                accept="image/*"
                style="display: none"
              />
            </div>

            <!-- Try-Ons Tab -->
            <div class="tab-content" id="tryonsTab">
              <div class="section-header">
                <button class="btn secondary small" id="refreshTryOnsBtn">
                  <i class="ph ph-arrow-clockwise" style="font-size: 16px"></i>
                  Refresh
                </button>
              </div>
              <div class="content-area">
                <div class="tryons-grid" id="tryonsGrid">
                  <div class="empty-state">
                    <div class="empty-icon">
                      <i class="ph ph-magic-wand" style="font-size: 48px"></i>
                    </div>
                    <h3>Your Try-On Gallery</h3>
                    <p>
                      This is where your virtual try-on results will appear.
                      Start by adding an avatar and some clothing items, then
                      see how they look together!
                    </p>
                    <div class="empty-steps">
                      <div class="step">
                        <span class="step-number">1</span>
                        <span>Add an avatar photo</span>
                      </div>
                      <div class="step">
                        <span class="step-number">2</span>
                        <span>Build your wardrobe</span>
                      </div>
                      <div class="step">
                        <span class="step-number">3</span>
                        <span>Try on clothes virtually</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Profile Modal (Hidden by default) -->
    <div class="profile-modal" id="profileModal" style="display: none">
      <div class="profile-modal-content">
        <div class="profile-modal-header">
          <button class="close-btn" id="closeProfileModal">×</button>
        </div>
        <div class="profile-modal-body">
          <div class="profile-modal-user">
            <div class="profile-modal-info">
              <h3 id="modalUserEmail">user@example.com</h3>
              <div class="subscription-badge" id="subscriptionBadge">
                <span class="badge-text" id="subscriptionText">Free</span>
              </div>
            </div>
          </div>

          <div class="profile-modal-stats">
            <div class="generation-stats">
              <h4>Virtual Try-Ons</h4>
              <div class="stats-info">
                <span id="generationCount">0</span> /
                <span id="generationLimit">15</span>
                <span id="generationPlanText">free generations used</span>
              </div>
              <div class="stats-bar">
                <div class="stats-progress" id="statsProgress"></div>
              </div>
            </div>
          </div>

          <div class="profile-modal-actions">
            <button
              class="action-btn upgrade-btn hidden"
              id="upgradeBtn"
            >
              <i class="ph ph-crown" style="font-size: 18px"></i>
              Upgrade to Pro
            </button>
            <button
              class="action-btn cancel-subscription-btn hidden"
              id="cancelSubscriptionBtn"
            >
              <i class="ph ph-x-circle"></i>
              Cancel Subscription
            </button>
            <div
              class="action-btn subscription-ending-notice hidden"
              id="subscriptionEndingNotice"
            >
              <i class="ph ph-info" style="font-size: 18px"></i>
              <div class="notice-text">
                <span class="notice-title">Subscription Canceled</span>
                <span class="notice-subtitle">Pro access until billing period ends</span>
              </div>
            </div>
            <button class="action-btn" id="modalSignOutBtn">
              <i class="ph ph-sign-out" style="font-size: 18px"></i>
              Sign Out
            </button>
            <button class="action-btn danger" id="modalDeleteAccountBtn">
              <i class="ph ph-minus" style="font-size: 18px"></i>
              Delete Account
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile image input removed - using avatar system -->

    <script src="popup.js"></script>
  </body>
</html>
